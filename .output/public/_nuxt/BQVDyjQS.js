import{_ as R}from"./BgR8CxM9.js";import{_ as H,q as O,A as Y,m as J,r as i,s as D,B as K,c as r,o as a,a as e,R as h,t as l,b as W,w as X,d as Z,j as $,k as b,v as T,T as U,U as x,l as ee}from"./Cdk1S3_b.js";import{_ as te,a as oe}from"./DzmZW_4Y.js";const se={class:"page-wrapper"},ne={class:"top-container"},re={class:"navbar"},ae={class:"navbar-container user-info"},le={class:"logout"},ue={key:0,class:"course-info container"},ie={key:1,class:"course-info container"},ce={class:"action-buttons container"},de={class:"button-group"},pe={class:"modal-content"},ve={class:"body-container"},me={class:"student-list"},fe={class:"list-header"},he={class:"search"},ye={class:"table-container"},Ce={key:0},_e={class:"history"},ge={class:"card-container"},ke={key:0,class:"no-data"},be={__name:"[course_id]",setup(Te){const w=O(),p=Y(),o=ee,c=J(),y=i(!1),u=i(null),C=i([]),A=i([]),v=i(""),E=D(()=>c.user&&c.user.name?c.user.name:"Guest"),S=D(()=>v.value?C.value.filter(n=>n.name.toLowerCase().includes(v.value.toLowerCase())):C.value),L=async()=>{const n=p.params.course_id;try{const t=await $fetch(`https://genertia-quizmakerbackend.onrender.com/professor/courses/${n}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c.accessToken}`}});u.value=t,o.success("Course details loaded.")}catch(t){o.error("Failed to fetch course details."),console.error("Fetch course details error:",t)}},M=async()=>{const n=p.params.course_id;o.info("Fetching Students list");try{const t=await $fetch(`https://genertia-quizmakerbackend.onrender.com/professor/courses/${n}/students`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c.accessToken}`}});C.value=t,o.info("Students list successfully fetched")}catch(t){o.error("Failed to fetch students."),console.error("Fetch students error:",t)}},V=()=>{o.info("Fetching Assements History")},_=i(!1),m=i(""),f=i(""),B=i(!0),F=()=>{u.value&&(m.value=u.value.title,f.value=u.value.description,B.value=u.value.is_active,_.value=!0)},g=()=>{_.value=!1},N=async()=>{const n=p.params.course_id,t={title:m.value,description:f.value,is_active:!0};try{const d=await $fetch(`https://genertia-quizmakerbackend.onrender.com/professor/courses/${n}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c.accessToken}`},body:t});u.value=d,o.success("Course updated successfully."),g()}catch(d){o.error("Failed to update course."),console.error("Update course error:",d)}},k=i(!1),I=()=>{k.value=!0},z=()=>{k.value=!1},q=async()=>{const n=p.params.course_id;try{await $fetch(`https://genertia-quizmakerbackend.onrender.com/professor/courses/${n}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c.accessToken}`}}),o.success("Course deleted successfully."),w.push("/professor/professor-dashboard")}catch(t){o.error("Failed to delete course."),console.error("Delete course error:",t)}},j=()=>{o.info("View analytics functionality coming soon!")},Q=()=>{o.info("Start quiz functionality coming soon!")},G=()=>{o.info("Add student functionality coming soon!")},P=async()=>{if(confirm("Are you sure you want to logout?")){y.value=!0;try{await $fetch("https://genertia-quizmakerbackend.onrender.com/logout",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c.accessToken}`}}),o.success("You have been logged out successfully."),c.logout(),w.push("/")}catch(n){o.error("An error occurred during logout."),console.error("Logout error:",n)}finally{y.value=!1}}};return K(()=>{L(),M(),V()}),(n,t)=>{const d=R;return a(),r("div",se,[e("header",ne,[t[5]||(t[5]=e("div",{class:"logo-container"},[e("h1",null,"QuizMakerAI")],-1)),e("nav",re,[e("div",ae,[t[3]||(t[3]=e("img",{src:te,alt:"User Icon"},null,-1)),e("p",null,l(E.value),1)]),e("div",{class:"navbar-container logout-container",onClick:P},[t[4]||(t[4]=e("img",{src:oe,alt:"Logout Icon"},null,-1)),e("p",le,l(y.value?"Logging out...":"Logout"),1)])])]),u.value?(a(),r("section",ue,[e("h1",null,"Course Title: "+l(u.value.title),1),e("h3",null,"Course Code: "+l(u.value.access_code),1),e("p",null,l(u.value.description),1)])):(a(),r("section",ie,t[6]||(t[6]=[e("p",null,"Loading course details...",-1)]))),e("section",ce,[e("div",de,[e("button",{onClick:j},"View Analytics"),e("button",{onClick:Q},"Start Quiz"),e("button",{onClick:F},"Update Course"),e("button",{onClick:I,class:"delete"},"Delete Course"),e("button",null,[W(d,{to:"/professor/notes-upload"},{default:X(()=>t[7]||(t[7]=[Z("Upload and View Notes")])),_:1})])])]),_.value?(a(),r("div",{key:2,class:"modal-overlay",onClick:$(g,["self"])},[e("div",pe,[t[8]||(t[8]=e("h2",null,"Update Course",-1)),t[9]||(t[9]=e("label",{for:"update-course-title"},"Title",-1)),b(e("input",{id:"update-course-title",type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>m.value=s),placeholder:"Enter course title"},null,512),[[T,m.value]]),t[10]||(t[10]=e("label",{for:"update-course-description"},"Description",-1)),b(e("textarea",{id:"update-course-description",rows:"3","onUpdate:modelValue":t[1]||(t[1]=s=>f.value=s),placeholder:"Enter course description"},null,512),[[T,f.value]]),e("div",{class:"modal-buttons"},[e("button",{class:"btn-secondary",onClick:g}," Cancel "),e("button",{class:"btn-primary",onClick:N}," Update Course ")])])])):h("",!0),k.value?(a(),r("div",{key:3,class:"modal-overlay",onClick:$(z,["self"])},[e("div",{class:"modal-content"},[t[11]||(t[11]=e("h2",null,"Confirm Delete Course",-1)),t[12]||(t[12]=e("p",null," Are you sure you want to delete this course? This action cannot be undone. ",-1)),e("div",{class:"modal-buttons"},[e("button",{class:"btn-secondary",onClick:z}," Cancel "),e("button",{class:"btn-primary",onClick:q}," Delete Course ")])])])):h("",!0),e("main",ve,[e("section",me,[e("div",fe,[t[13]||(t[13]=e("h2",null,"Enrolled Students",-1)),e("div",he,[b(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=s=>v.value=s),placeholder:"Search Students"},null,512),[[T,v.value]]),e("button",{onClick:G},"Add Students")])]),e("div",ye,[e("table",null,[t[15]||(t[15]=e("thead",null,[e("tr",null,[e("th",null,"Name"),e("th",null,"Email"),e("th",null,"Enrollment Date")])],-1)),e("tbody",null,[(a(!0),r(U,null,x(S.value,s=>(a(),r("tr",{key:s.user_id},[e("td",null,l(s.name),1),e("td",null,l(s.email),1),e("td",null,l(s.enrolled_at),1)]))),128)),S.value.length===0?(a(),r("tr",Ce,t[14]||(t[14]=[e("td",{colspan:"3",class:"no-data"},"No students found.",-1)]))):h("",!0)])])])]),e("section",_e,[t[17]||(t[17]=e("h2",null,"Assessments & Past Quizzes",-1)),e("div",ge,[(a(!0),r(U,null,x(A.value,s=>(a(),r("div",{class:"card",key:s.id},[e("h3",null,l(s.title),1),e("p",null,"Average Score: "+l(s.averageScore)+"%",1),e("p",null,"Date: "+l(s.date),1)]))),128)),A.value.length===0?(a(),r("div",ke,t[16]||(t[16]=[e("p",null,"No assessments available.",-1)]))):h("",!0)])])])])}}},ze=H(be,[["__scopeId","data-v-f47c78c5"]]);export{ze as default};
