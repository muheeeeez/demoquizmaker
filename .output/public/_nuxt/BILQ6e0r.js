import{_ as $}from"./BgR8CxM9.js";import{p as A,_ as z,q as M,r as i,m as B,s as L,B as N,c as m,o as v,a as e,R,t as a,d as g,j as P,k as b,v as k,T as S,U as j,b as q,w as D,l as F}from"./Cdk1S3_b.js";import{_ as U,a as V}from"./DzmZW_4Y.js";const E=A("/images/hand.png"),I={class:"top-container"},O={class:"navbar"},H={class:"navbar-container user-info"},G={class:"logout"},Q={class:"container"},W={class:"button-group top-buttons"},Y={class:"modal-content"},J={class:"card-container"},K={class:"button-set"},X={class:"btn-primary"},Z=["onClick"],ee={__name:"professor-dashboard",setup(oe){const _=M(),t=F,f=i(!1),n=B(),h=L(()=>n.user&&n.user.name?n.user.name:"Guest"),u=i(!1),l=i(""),c=i(""),d=i([]),C=async()=>{t.info("Courses Refreshing...");try{const r=await $fetch("https://genertia-quizmakerbackend.onrender.com/professor/courses?active_only=false",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n.accessToken}`}});d.value=r,t.success("Courses refreshed.")}catch(r){t.error("Failed to fetch courses."),console.error("Fetch courses error:",r)}},w=async()=>{if(!l.value.trim()||!c.value.trim()){t.error("Please fill in all course details.");return}const r={title:l.value,description:c.value,is_active:!0};try{t.info("Creating Course...");const o=await $fetch("https://genertia-quizmakerbackend.onrender.com/professor/courses",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n.accessToken}`},body:r});t.success("Course created successfully."),d.value.push(o),l.value="",c.value="",u.value=!1}catch(o){t.error("Failed to create course."),console.error("Create course error:",o)}},y=()=>{u.value=!1},T=async r=>{try{t.info("Regenerating access code...");const o=await $fetch(`https://genertia-quizmakerbackend.onrender.com/professor/courses/${r}/regenerate-code`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n.accessToken}`}});t.success("Access code regenerated successfully.");const p=d.value.find(s=>s.id===r);p&&(p.access_code=o.access_code||o.additionalProp1)}catch(o){t.error("Failed to regenerate course access code."),console.error("Regenerate code error:",o)}},x=async()=>{if(confirm("Are you sure you want to logout?")){f.value=!0;try{await $fetch("https://genertia-quizmakerbackend.onrender.com/logout",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n.accessToken}`}}),t.success("You have been logged out successfully."),n.logout(),_.push("/")}catch(r){t.error("An error occurred during logout."),console.error("Logout error:",r)}finally{f.value=!1}}};return N(()=>{C()}),(r,o)=>{const p=$;return v(),m("div",null,[e("div",I,[o[5]||(o[5]=e("div",{class:"logo-container"},[e("h1",null,"QuizMakerAI")],-1)),e("div",O,[e("div",H,[o[3]||(o[3]=e("img",{src:U,alt:"User Icon"},null,-1)),e("p",null,a(h.value),1)]),e("div",{class:"navbar-container logout-container",onClick:x},[o[4]||(o[4]=e("img",{src:V,alt:"Logout Icon"},null,-1)),e("p",G,a(f.value?"Logging out...":"Logout"),1)])])]),e("div",Q,[e("h1",null,[g(" Welcome, "+a(h.value)+" ",1),o[6]||(o[6]=e("img",{src:E,alt:"Hand Icon",class:"hand-icon"},null,-1))])]),e("div",W,[e("button",{class:"primary-btn",onClick:o[0]||(o[0]=s=>u.value=!0)},o[7]||(o[7]=[e("svg",{class:"icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4v16m8-8H4"})],-1),g(" Create a New Course ")])),e("button",{class:"secondary-btn",onClick:C}," Refresh Courses ")]),u.value?(v(),m("div",{key:0,class:"modal-overlay",onClick:P(y,["self"])},[e("div",Y,[o[8]||(o[8]=e("h2",null,"Create a New Course",-1)),o[9]||(o[9]=e("label",{for:"course-title"},"Title",-1)),b(e("input",{id:"course-title",type:"text","onUpdate:modelValue":o[1]||(o[1]=s=>l.value=s),placeholder:"Enter course title"},null,512),[[k,l.value]]),o[10]||(o[10]=e("label",{for:"course-description"},"Description",-1)),b(e("textarea",{id:"course-description",rows:"3","onUpdate:modelValue":o[2]||(o[2]=s=>c.value=s),placeholder:"Enter course description"},null,512),[[k,c.value]]),e("div",{class:"modal-buttons"},[e("button",{class:"btn-secondary",onClick:y},"Cancel"),e("button",{class:"btn-primary",onClick:w}," Create Course ")])])])):R("",!0),e("div",J,[(v(!0),m(S,null,j(d.value,s=>(v(),m("div",{class:"card",key:s.id},[e("h2",null,a(s.title),1),e("p",null,"Course Code: "+a(s.access_code),1),e("p",null,"Students Enrolled: "+a(s.student_count),1),e("div",K,[e("button",X,[q(p,{to:`/professor/${s.id}`},{default:D(()=>o[11]||(o[11]=[g("Manage Course")])),_:2},1032,["to"])]),e("button",{class:"btn-secondary",onClick:se=>T(s.id)}," Regenerate Code ",8,Z)])]))),128))]),o[12]||(o[12]=e("div",{class:"announcement-card"},[e("h1",null,"Announcements"),e("p",null,"Upcoming quiz in Calculus 101 on Friday, 3 PM."),e("p",null,"Check out new resources in Physics 202."),e("p",null,"Midterm exam schedule has been updated."),e("p",null,"New study materials are available for History 101.")],-1))])}}},ae=z(ee,[["__scopeId","data-v-274616b1"]]);export{ae as default};
