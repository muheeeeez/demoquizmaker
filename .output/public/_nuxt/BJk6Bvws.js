import{_ as f,q as g,A as p,m as h,r as m,B as v,c as i,o as n,a as c,R as _,t as k,l}from"./Cdk1S3_b.js";const y={class:"verify-page"},M={class:"verify-card"},L={key:0,class:"verify-error"},R={__name:"verify-magic-link",setup(S){const t=g(),u=p(),o=h(),a=m(""),d=async r=>{var e;try{const s=await $fetch("https://genertia-quizmakerbackend.onrender.com/auth/login/magic-link",{method:"POST",headers:{"Content-Type":"application/json"},body:{token:r}});l.success("Magic link verified successfully!"),o.setAuth(s),(e=o.user)!=null&&e.role&&o.user.role.toLowerCase()==="professor"?t.push("/professor/professor-dashboard"):t.push("/student/student-dashboard")}catch(s){l.error("Verification failed. Please try logging in again."),a.value="Verification failed. Please try logging in again.",console.error("Magic link verification error:",s)}};return v(()=>{const r=u.hash;if(r){const s=new URLSearchParams(r.slice(1)).get("access_token");s?d(s):a.value="No magic token provided in the URL."}else a.value="No magic link parameters found."}),(r,e)=>(n(),i("div",y,[c("div",M,[e[0]||(e[0]=c("h1",{class:"verify-title"},"Verifying Magic Link...",-1)),a.value?(n(),i("p",L,k(a.value),1)):_("",!0)])]))}},b=f(R,[["__scopeId","data-v-ec3e40f6"]]);export{b as default};
